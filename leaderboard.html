<!doctype html><html lang="zh">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>排行榜</title>
<style>
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:#0b1220;color:#e6edf3;margin:0}
.wrapper{max-width:720px;margin:40px auto;padding:0 16px}
h1{font-size:22px;margin:0 0 16px}
.card{background:#111827;border:1px solid #1f2937;border-radius:12px;padding:16px}
table{width:100%;border-collapse:collapse}
th,td{text-align:left;padding:10px 8px;border-bottom:1px solid #1f2937}
th{font-weight:600;color:#93a4b8}
.rank{width:52px}
.score{width:120px}
.btns{display:flex;gap:8px;margin-top:14px}
a.btn{display:inline-block;padding:10px 14px;border-radius:10px;text-decoration:none;background:#2563eb;color:#fff}
a.btn.secondary{background:#374151}
</style>
  <link rel="stylesheet" href="style/world.css">
</head>
<body>
  <div class="wrapper">
    <h1>排行榜 Top 10</h1>
    <div class="card">
      <table id="tb"><thead>
        <tr><th class="rank">#</th><th>玩家</th><th class="score">得分</th><th>时间</th></tr>
      </thead><tbody></tbody></table>
      <div class="btns">
        <a class="btn" href="./">返回游戏</a>
        <a class="btn secondary" href="" id="refresh">刷新</a>
      </div>
    </div>
  </div>

  <script type="module">
    import { getTop } from './rank.js'
    const tbody = document.querySelector('#tb tbody')
    async function load(){
      const rows = await getTop(10)
      tbody.innerHTML = rows.map((r,i)=>`
        <tr>
          <td class="rank">${i+1}</td>
          <td>${(r.player||'guest').replace(/[<>&]/g,'')}</td>
          <td class="score">${r.score}</td>
          <td>${new Date(r.created_at).toLocaleString()}</td>
        </tr>`).join('')
    }
    document.getElementById('refresh').addEventListener('click', e=>{e.preventDefault();load()})
    load()
  </script>
</body></html>
